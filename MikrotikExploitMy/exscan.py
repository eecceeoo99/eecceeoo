import socket
import sys
from datetime import datetime
from time import *
import ipcalc
import optparse
parser = optparse.OptionParser()
inputSw, args = parser.parse_args()

print("BENDJEDDOU[+]")
t1=datetime.now()
print("Scanning start on  ip/ips ...")
targets = ipcalc.Network(sys.argv[1])
i = 0


try:
    file = open('list_ips.txt', 'w')
    for singleIp in targets:
        ip = str(singleIp)
        if __name__ == "__main__":
            i = i + 1
            
            port = (8291)
            s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)
            s.settimeout(0.3)
            print (i , "/" , len(targets) ," ", end="")
            if (s.connect_ex((ip,port))==0):
                print(("%s PORT %s:OPEN  "%(ip,port)))
                file.write(ip)
            else :
                print(("%s PORT %s:CLOSE "%(ip,port)))
            s.close()
    file.close()
    t2=datetime.now()
    t3=t2-t1
    print("Scanning Completed on %s!!"%t3)
except KeyboardInterrupt:
   print("	You Pressed CTRL+C =====>see You soon :) <==== ")
   sys.exit
      
   
